<!DOCTYPE html>
<html> 
<head>
<link rel="stylesheet" href="stylesheet.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pit Markdown - The Hypixel Pit Wiki</title>
<meta name="description" content="">
<meta name="author" content="BrookeAFK">
<meta name="keywords" content="">
<link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
<link rel="icon" type="image/x-icon" href="./favicon/favicon.ico">
<link rel="manifest" href="./favicon/site.webmanifest">
<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.0/showdown.min.js"></script>

<p style="text-align: center">
<label for="textarea">Hypixel Pit Markdown Editing</label><br>
<textarea id="htmlraw" style="width: 90%; height: 300px; font-size: 16px"></textarea><br>
<textarea id="htmloutput" style="width: 90%; height: 100px; font-size: 16px"></textarea><br>
</p>
<p id="htmlpaste" style="width: 100%;">Press any key to update the HTML!</p>

<p>quick styles:</p>
<pre><code style="background-color: #252525;">XP: &lt;a href="XP"&gt;&lt;span class="mb"&gt;XP&lt;/span&gt;&lt;/a&gt;
Gold: &lt;a href="Gold"&gt;&lt;span class="m6"&gt;gold&lt;/span&gt;&lt;/a&gt;
Renown: &lt;a href="Renown"&gt;&lt;span class="me"&gt;renown&lt;/span&gt;&lt;/a&gt;
<span class="m0">0</span> <span class="m1">1</span> <span class="m2">2</span> <span class="m3">3</span> <span class="m4">4</span> <span class="m5">5</span> <span class="m6">6</span> <span class="m7">7</span> <span class="m8">8</span> <span class="m9">9</span> <span class="ma">a</span> <span class="mb">b</span> <span class="mc">c</span> <span class="md">d</span> <span class="me">e</span> <span class="mf">f</span>
♥&amp;#xFE0E;
(&lt;span class="ma"&gt;<span class="ma">↑</span>&lt;/span>&gt;)
(&lt;span class="mc"&gt;<span class="mc">↓</span>&lt;/span>&gt;)
<script>
var title, author, keywords, intro;
var topimage = "";

function updateIntro() {
    intro = `<!DOCTYPE html>
<!-- Generated by Pit Markdown: https://pit.wiki/PitMD -->
<html> 
<head>
<link rel="stylesheet" href="stylesheet.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>` + title + ` - The Hypixel Pit Wiki</title>
<meta name="description" content="">
<meta name="author" content="` + author + `">
<meta name="keywords" content="` + keywords + `">
<link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
<link rel="icon" type="image/x-icon" href="./favicon/favicon.ico">
<link rel="manifest" href="./favicon/site.webmanifest">
\u003cscript src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous">\u003c/script>
\u003cscript> 
$(function(){
  $("#header").load("header.html"); 
  $("#footer").load("footer.html"); 
});
\u003c/script>
</head>
<body>
<div id="header"></div>
<div class="box">
<span class="body">` + topimage + `<span class="header">` + title + `</span><br>
<span class="subheader">From the <a href="./">Hypixel Pit Wiki</a></span><br><hr>`
}

var outro = `</span></div>
<div id="footer"></div>
</body>
</html>`


document.onkeyup=function(e){
showdown.setOption('tables', 'true');
var converter = new showdown.Converter(); //converts MD to HTML
var text = htmlraw.value; //gets markdown from input
title = (text.match(/title: .*/i))
author = (text.match(/author: .*/i))

if(title !== undefined && title !== null) { // if title exists
    title = title[0].substring(7); // remove "title: "
    keywords = "Hypixel Pit Wiki, Pit" + title + ", Hypixel, " + title + ", Hypixel Pit " + title;
} 
updateIntro();
text = text.replace(/\[box\|(\d+?)\|(.+?)\|(\d+?)\|(.+?)\]/gi,`<table class="item body" style="width: calc($1 * 10px)"><tr><td style="text-align: center"><img src="./images/$2" width="$3%"></td></tr><tr><td style="text-align: center" class="small">$4</td></tr></table>`)
text = text.replace(/\[box\|(\d+?)\|(.+?)\|(\d+?)\]/gi,`<table class="item body" style="width: calc($1 * 10px)"><tr><td style="text-align: center"><img src="./images/$2" width="$3%"></td></tr></table>`)
text = text.replace(/\[heart\]/gi,'♥&#xFE0E;')
text = text.replace(/\{([0123456789ABCDEF])\|/gi,`<span class="m$1">`)
text = text.replace(/\{td\|/gi,`<span class="td">`)
text = text.replace(/\{([0123456789ABCDEF]{6})\|/gi,`<span style="color: #$1">`)
text = text.replace(/([^\\])\}/g,`$1</span>`)

text = converter.makeHtml(text); // converts the MD to HTML

text = text.replace(/\[XP\]/gi,`<a href="XP"><span class="mb">XP</span></a>`)
text = text.replace(/\[gold\]/gi,`<a href="Gold"><span class="m6">gold</span></a>`)
text = text.replace(/\[renown\]/gi,`<a href="Renown"><span class="me">renown</span></a>`)
text = text.replace(/\[(.+?)\|XP\]/gi,`<a href="XP"><span class="mb">$1</span></a>`)
text = text.replace(/\[(.+?)\|gold\]/gi,`<a href="Gold"><span class="m6">$1</span></a>`)
text = text.replace(/\[(.+?)\|renown\]/gi,`<a href="Renown"><span class="me">$1</span></a>`)
text = text.replace(/<p>title: .*<\/p>{0,1}/gi,'')
text = text.replace(/<p>author: .*<\/p>{0,1}/gi,'')



var html = intro + text + outro;
htmloutput.value = html;
htmlpaste.innerHTML = html;
};

</script>